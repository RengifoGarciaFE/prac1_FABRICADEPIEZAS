<!DOCTYPE html>
<html>

    <title> Práctica 1 - Fundamentos de tecnología de videojugeos</title>
    <head> 
        <h1> LA FÁBRICA DE PIEZAS </h1>
    </head>
    <body>
        <script>
            class Piece{
    //constructor
    constructor(name, piece_cod, fab_date){
        this.name = name;
        this.piece_cod = piece_cod;
        this.fab_date = fab_date;
    }

    //Getters y setters 
    get name(){
        return this.name;
    }
    get piece_cod(){
        return this.piece_cod;
    }
    get fab_date(){
        return this.fab_date;
    }
    set name(x){
        this.name = x;
    }
    set piece_cod(x){
        this.piece_cod = x;
    }
    set fab_date(x){
        this.fab_date = x;
    }
}

class ElectricPiece extends Piece{
    //constructor
    constructor(name, piece_cod, fab_date, potency, voltage){
        super (name, piece_cod, fab_date);
        this.potency = potency;  // 1, 5, 10 o 20 watios
        this.voltage = voltage;  // 3.3, 5, 12 o 240 voltios
    }

    //Getters y setters
    get potency(){
        return this.potency;
    }
    get voltage(){
        return this.voltage;
    }
    set potency(x){
        this.potency = x;
    }
    set voltage(x){
        this.voltage = x;
    }
}

class MechPiece extends Piece {
    //constructor 
    constructor(name, piece_cod, fab_date, material){
        super (name, piece_cod, fab_date);
        this.material = material // Acero, titanio o carbono
    }                
    //Getters y setters
    get material(){
        return this.material;
    }
    set material(x){
        this.material = x;
    }
}

		
			
class Factory{
    constructor(){
        var elecPieces = 0;
        var mechPieces = 0;
		var totalPieces = elecPieces + mechPieces;
    }
	
	get totalPieces(){
		return this.totalPieces;
	}

    generatePiece(){
        var prob = generateNum(1,10);
        if(prob<=3){
            elecPieces++;
            return true;
        } else if(prob>3){
            mechPieces++;
            return false;
        }
    }

	
    choseSybtype(x, Piece){
        var prob = generateNum(1,100)
        if(x==true){
            if(prob <=20){
                Piece.name("Placa ABS");
            } else if(prob>20 && prob<=40){
                Piece.name("Centralita encendido");
            } else if(prob>40 && prob<=60){
                Piece.name("Bornes cableado");
            }else if(prob>60 && prob <=80){
                Piece.name("Alternador");
            } else if (prob>80){
                Piece.name("Encendido");
            }
        } else if(x==false){
            if(prob <=20){
                Piece.name("Larguero inferior");
            } else if(prob>20 && prob<=40){
                Piece.name("Guardabarros");
            } else if(prob>40 && prob<=60){
                Piece.name("Larguero superior");
            }else if(prob>60 && prob <=80){
                Piece.name("Subchasis");
            } else if (prob>80){
                Piece.name("Puerta");
            }
        }

    }

	
	choseAtribs(x, Piece){
		
        if(x==true){
			
			var prob = generateNum(1,4);
       
            if(prob1 == 1){
                Piece.potency(1);
            } else if(prob == 2){
                Piece.potency(5);
            } else if(prob == 3){
                Piece.potency(10);
            } else if(prob == 4){
                Piece.potency(20);
            }
            
            prob1=generateNum(1,4);

            if(prob1 == 1){
                Piece.voltage(3.3);
            } else if(prob == 2){
                Piece.voltage(5);
            } else if(prob == 3){
                Piece.voltage(12);
            } else if(prob == 4){
                Piece.voltage(240);
            }

        }else if(x==false){
            
			prob = generateNum(1,3);
			
			if(prob == 1){
                Piece.material("Acero");
            } else if(prob == 2){
                Piece.material("Titanio");
            } else if(prob == 3){
                Piece.material("Carbono");
            }
        }
    }
	
	
	assignNum(x, Piece){
		
		const pieces = [];
		pieces.push = Piece;
	
		var y= true;
		
		
		var num = generateNum(1000000000,9999999999);
		
		if(x>1){
			var auxNum = num;
			
			do{
				for(int i = 0; i<x; i++){
					if (auxNum==pieces[i].piece_cod){
						y=false;
					}
					auxNum=generateNum(1000000000,9999999999);
				}
			}while(y==false);
			
			pieces[x].piece_cod(auxNum);
		}
		pieces[x].piece_cod(num);
		
		
		
		var day;
		var month = generateNum(1,12);
		if(month==2){
			day= generateNum(1,28);
		} else if(month==4 || month == 6 || month==9 || month==11){
			day=generateNum(1,30);
		} else 
			day= generateNum(1,31);
		
		var year = generateNum(2000, 2021);
		
		var date = new Date(year, month, day);
		
		pieces[x].fab_date(date);
	}

	

	
}

			
			

function generateNum(min, max) {
  return Math.random() * (max - min) + min;
}

        </script>
    </body>


</html>
